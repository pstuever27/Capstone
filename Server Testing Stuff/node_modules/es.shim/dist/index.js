(()=>{Object.empty||Object.defineProperty(Object,"empty",{value:function(e){try{for(let t in e)return!1}catch(t){}return!0}});Object.prototype.toParams||Object.defineProperty(Object.prototype,"toParams",{value:function(){let e="";for(let t in this)this[t]!==void 0&&(e+=`&${t}=${this[t]}`);return e.slice(1)}});Object.defineProperty(Array.prototype,"flat",{value:function(e=1,t=[]){for(let r of this)Array.isArray(r)&&e>0?r.flat(e-1,t):t.push(r);return t},writable:!0});Object.defineProperty(Array.prototype,"flatMap",{value:function(e){return this.map(e).flat()},writable:!0});Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(e){let t=+e;return t<0&&(t+=this.length),this[t]},writable:!0});Array.prototype.findLast||(Object.defineProperty(Array.prototype,"findLast",{value:function(e){let t=this.length;for(;t>0;){let r=this[--t];if(e(r,t))return r}},writable:!0}),Object.defineProperty(Array.prototype,"findLastIndex",{value:function(e){let t=this.length;for(;t>0;){let r=this[--t];if(e(r,t))return t}return-1},writable:!0}));Array.prototype.toSorted||(Object.defineProperty(Array.prototype,"toSorted",{value:function(e){return[...this].sort(e)},writable:!0}),Object.defineProperty(Array.prototype,"toReversed",{value:function(){return[...this].reverse()},writable:!0}),Object.defineProperty(Array.prototype,"toSpliced",{value:function(...e){return[...this].splice(...e)},writable:!0}),Object.defineProperty(Array.prototype,"with",{value:function(e,t){let r=+e,i=[...this];return r<0&&(r+=i.length),i[r]=t,i},writable:!0}));Array.prototype.group||(Object.defineProperty(Array.prototype,"group",{value:function(e){let t={};if(typeof e=="function"){for(let r of this){let i=e(r);t[i]?t[i].push(r):t[i]=[r]}return t}else throw Error("argument callback must be a function.")},writable:!0}),Object.defineProperty(Array.prototype,"groupToMap",{value:function(e){let t=new Map;if(typeof e=="function"){for(let r of this){let i=e(r);t.has(i)?t.get(i).push(r):t.set(i,[r])}return t}else throw Error("argument callback must be a function.")},writable:!0}));function n(e,t){if(e+="",t+="",e===t)return 0;{e=e.split("."),t=t.split(".");let r=Math.max(e.length,t.length);for(let i=0;i<r;i++){let o=+e[i]||0,u=+t[i]||0;if(o>u)return 1;if(o<u)return-1}return 0}}String.prototype.splice||Object.defineProperty(String.prototype,"splice",{value:function(e,t,r){let i=this.length,o=arguments.length;if(r=r===void 0?"":r,o<1)return this;if(e<0&&(Math.abs(e)>=i?e=0:e=i+e),o===1)return this.slice(0,e);{t-=0;let u=this.slice(0,e),p=this.slice(e+t);return u+r+p}}});String.prototype.htmlspecialchars||Object.defineProperty(String.prototype,"htmlspecialchars",{value:function(e){let t=this.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return e==="ENT_QUOTES"?t.replace(/"/g,"&quot;").replace(/'/g,"&#39;"):e==="ENT_NOQUOTES"?t:t.replace(/"/g,"&quot;")}});String.prototype.tohtml||Object.defineProperty(String.prototype,"tohtml",{value:function(){return this.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&#39;/g,"'").replace(/&amp;/gi,"&")}});String.prototype.xss||Object.defineProperty(String.prototype,"xss",{value:function(){let e=this.htmlspecialchars("ENT_QUOTES");return e=e.replace(/(document\.cookie)|(document\.write)|(\.parentNode)|(window\.location)|(\.innerHTML)/g,"").replace(/(%0[0-8bcef])|(%1[0-9a-f])/g,""),e}});String.prototype.escape||Object.defineProperty(String.prototype,"escape",{value:function(){return this.replace(/('|"|&|\\|\}|\{|\(|\)|;|=|\,|&)/g,"\\$1")}});String.prototype.at||Object.defineProperty(String.prototype,"at",{value:function(e){let t=+e;return t<0&&(t+=this.length),this[t]},writable:!0});String.prototype.toJson||Object.defineProperty(String.prototype,"toJson",{value:function(){let e=this.replace(/^\?/,""),t=decodeURIComponent(e).split("&").filter(i=>i).map(i=>i.split("=")),r={};for(let i of t)r[i[0]]=i[1]||"";return r}});String.prototype.lt||(Object.defineProperty(String.prototype,"lt",{value:function(e){return n(this,e)===-1}}),Object.defineProperty(String.prototype,"lte",{value:function(e){return n(this,e)<1}}),Object.defineProperty(String.prototype,"gt",{value:function(e){return n(this,e)===1}}),Object.defineProperty(String.prototype,"gte",{value:function(e){return n(this,e)>-1}}),Object.defineProperty(String.prototype,"eq",{value:function(e){return n(this,e)===0}}));Number.parse||Object.defineProperty(Number,"parse",{value:function(e){return typeof e=="number"||typeof e=="string"?(e+="",e.startsWith("0")&&!e.startsWith("0.")?e==="0"?0:e:(isFinite(e)&&e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER&&(e=+e),e)):e}});Number.fromString||Object.defineProperty(Number,"fromString",{value:function(e){return+e||0}});Date.isDate||Object.defineProperty(Date,"isDate",{value:function(e){return!!(e&&typeof e=="object"&&e.getTime)},writable:!0});Date.prototype.getFullWeek||(Object.defineProperty(Date.prototype,"getFullWeek",{value:function(){let e=this.getFullYear(),t=new Date(e,0,1),r=t.getDay(),i=(this-t)/24/360/1e3;return Math.ceil((i+r)/7)}}),Object.defineProperty(Date.prototype,"getWeek",{value:function(){let e=this.getDate(),t=this.getMonth(),r=this.getFullYear(),i=new Date(r,t,1).getDay();return Math.ceil((e+i)/7)}}));Date.prototype.format||Object.defineProperty(Date.prototype,"format",{value:function(e){let t={fullyear:this.getFullYear(),year:this.getYear(),fullweek:this.getFullWeek(),week:this.getWeek(),month:this.getMonth()+1,date:this.getDate(),day:this.getDay()+1,hours:this.getHours(),minutes:this.getMinutes(),seconds:this.getSeconds()},r=null;e=e||"Y-m-d H:i:s",t.g=t.hours>12?t.hours-12:t.hours,r={Y:t.fullyear,y:t.year,m:t.month<10?"0"+t.month:t.month,n:t.month,d:t.date<10?"0"+t.date:t.date,j:t.date,H:t.hours<10?"0"+t.hours:t.hours,h:t.g<10?"0"+t.g:t.g,G:t.hours,g:t.g,i:t.minutes<10?"0"+t.minutes:t.minutes,s:t.seconds<10?"0"+t.seconds:t.seconds,W:t.fullweek,w:t.week,D:t.day};for(let i in r)e=e.replace(new RegExp(i,"g"),r[i]);return e}});Promise.defer||(Promise.defer=function(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e});})();
